<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>박지은 아파트 구매계산기 2.0</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <header style="margin-bottom: 16px;">
    <h1>박지은을 위한 아파트 구매 계산기 2.0</h1>
    <p class="lead">현재 상황에 맞춰서 주담대 LTV/DSR 한도, 상환액, 유지비, 세금, 보유기간 손익을 계산해줄게. 하 만들기 힘들다</p>
  </header>

  <div class="container">
    <section class="card">
      <h2>입력란</h2>
      <div class="grid">
        <div>
          <label>아파트 매매가 (만원)</label>
          <input type="text" id="price" inputmode="numeric" placeholder="예: 62,000" />
        </div>
        <div>
          <label>박지은 보유 자본 (만원)</label>
          <input type="text" id="cash" inputmode="numeric" placeholder="예: 10,000" />
        </div>

        <div>
          <label>박지은 연봉 (만원)</label>
          <input type="text" id="annualIncome" inputmode="numeric" placeholder="예: 4,500" />
        </div>
        

        <div>
          <label>대출기간 (년)</label>
          <input type="number" id="loanYears" min="1" max="40" step="1" placeholder="30" />
        </div>
        <div>
          <label>연 이자율 (%, 고정 가정)</label>
          <input type="number" id="annualRate" min="0" max="20" step="0.01" placeholder="3.9" />
        </div>

        <div>
          <label>LTV 입력 (%)</label>
          <input type="number" id="ltvManualPct" min="0" max="100" step="1" placeholder="70" value="80" />
        </div>

        <div>
          <label>DSR 한도 (%)</label>
          <input type="number" id="dsrLimitPct" min="0" max="100" step="1" placeholder="40" />
        </div>
        <div>
          <label>다른 대출 월 상환액 (만원, DSR계산을 위함)</label>
          <input type="text" id="existingMonthlyDebt" inputmode="numeric" placeholder="예: 0" />
        </div>

        <div>
          <label>공시가/시세 비율 (재산세 간이 계산용)</label>
          <input type="number" id="assessedRatioPct" min="0" max="100" step="1" placeholder="70" />
        </div>
        <div>
          <label>목표 보유 기간 (년)</label>
          <input type="number" id="holdingYears" min="1" max="40" step="1" placeholder="10" />
        </div>

        <div>
          <label>연 시세상승률 가정 (%)</label>
          <input type="number" id="annualAppreciationPct" min="-50" max="50" step="0.1" placeholder="2.5" />
        </div>
        <div>
          <label>혹은 목표 매도가 (만원, 입력안하면 평균 시세상승 적용)</label>
          <input type="text" id="targetSellPrice" inputmode="numeric" placeholder="예: 70,000" />
        </div>

        
      </div>

      <div class="flex" style="margin-top:12px;">
        <button class="btn" id="btnCalc">계산하기</button>
        <span class="note">입력값 변경 시 자동으로 갱신돼</span>
      </div>
    </section>

    <section class="card">
      <h2>계산 결과</h2>
      <div class="subhead">대출</div>
      <div class="grid">
        <div>
          <div class="muted">대출 필요액</div>
          <div class="value" id="neededLoan">-</div>
          <div class="kicker">= 매매가 − 보유자본</div>
        </div>
        <div>
          <div class="muted">적용 LTV 상한</div>
          <div class="value" id="ltvCap">-</div>
          <div class="kicker">지역 기본치, 수동 조정 가능</div>
        </div>

        <div>
          <div class="muted">DSR 허용 월상환 상한</div>
          <div class="value" id="dsrCapMonthly">-</div>
          <div class="kicker">(연소득×DSR/12) − 기존부채</div>
        </div>
        <div>
          <div class="muted">한도 내 대출 가능액</div>
          <div class="value" id="maxLoanAllowed">-</div>
          <div class="kicker">LTV/DSR 중 작은 값</div>
        </div>
        <div>
          <div class="muted">최대 대출 대비 부족 자본금 <span class="tooltip">ⓘ<span class="tip">아파트 대출 가능 금액은 실거래가 아닌 시세 기준이므로 실제 대출 가능 금액은 더 높을 수 있음</span></span></div>
          <div class="value" id="shortCapital">-</div>
          <div class="kicker">= 필요대출 − 한도내 대출</div>
        </div>

        <div style="grid-column: 1 / -1;">
          <div class="hero">
            <div class="title">예상 월 납부 원리금</div>
            <div class="amount" id="monthlyPayment">-</div>
          </div>
          <div class="subitems">
            <span>원금 평균: <span id="avgPrincipal">-</span></span>
            <span style="margin-left:12px;">이자 평균: <span id="avgInterest">-</span></span>
          </div>
        </div>
      </div>

      <hr class="sep" />
      <div class="subhead">매수 시 비용</div>
      <div>
        <div class="subitems">
          <div>· 취득세(생애최초 200만원 할인 반영): <span id="acqTax">-</span></div>
          <div>· 중개수수료(추정): <span id="brokerFee">-</span></div>
          <div>· 인지세(추정): <span id="stampTax">-</span></div>
        </div>
        <div class="hero" style="margin-top:8px;">
          <div class="title">매수 시 비용 합계</div>
          <div class="amount" id="buyCostGrandTotal">-</div>
        </div>
      </div>

      <hr class="sep" />
      <div class="subhead">보유 유지비</div>
      <div class="grid">
        <div>
          <div class="muted">연간 보유세 추정(재산세)</div>
          <div class="value" id="annualPropertyTax">-</div>
          <div class="kicker">공시가≈시세×비율, 간이누진</div>
        </div>
        <div>
          <div class="muted">보유기간 총이자(추정)</div>
          <div class="value" id="interestPaid">-</div>
          <div class="kicker">원리금균등 기준</div>
        </div>
      </div>

      <hr class="sep" />
      <div class="subhead">시세 차익</div>
      <div>
        <div class="muted">단순 시세 차익(세전)</div>
        <div class="value" id="simpleGain">-</div>
      </div>
      <div style="margin-top:8px;">
        <div class="muted">보유기간 손익(세전·취득세/부대비용 포함, 양도세 제외)</div>
        <div class="value" id="pnl">-</div>
        <div class="subitems" style="margin-top:2px;">
          <div><span id="dbgSimpleGain">-</span> − (취득세 <span id="dbgAcq">-</span> + 부대비용 <span id="dbgBuyCost">-</span> + 이자 <span id="dbgInterest">-</span> <span class="note-inline">(<span id="dbgMonths">-</span>개월치)</span>)</div>
        </div>
      </div>
    </section>
  </div>

  <section class="card" style="margin-top:16px;">
    <h2>상세 계산</h2>
    <div class="grid-3">
      <div>
        <div class="muted">LTV 기준 최대 대출</div>
        <div class="value" id="ltvMax">-</div>
      </div>
      <div>
        <div class="muted">DSR 기준 최대 대출</div>
        <div class="value" id="dsrMax">-</div>
      </div>
      <div>
        <div class="muted">필요 대출 대비 부족/여유</div>
        <div class="value" id="gap">-</div>
      </div>
    </div>

    <hr class="sep" />
    <div class="small">
      가정 : (1) 원리금균등, 고정금리 (2) 취득세 좀 정확하지 않음. (3) 보유세: 공시가≈시세×입력비율 (4) DSR: (연소득×한도/12 − 기존 월 대출상환금)로 산정한 월상환 상한 기준. 오세용이 만듬.
    </div>
  </section>

  <!-- JavaScript 모듈 로드 -->
  <script src="js/formatters.js"></script>
  <script src="data/tax-rates.js"></script>
  <script src="js/loan-calculator.js"></script>
  <script src="js/calculator.js"></script>
  <script>
    // 페이지 로드 시 초기화
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
